secrets:
  image: 'turistforeningen/mongo-secrets:v1'
  tags:
    - staging
  volumes:
    - /secrets

setup:
  command: './setup.sh'
  image: 'turistforeningen/docker-mongo'
  tags:
    - staging
  volumes_from:
    - 'secrets:ro'

mongo-01:
  autoredeploy: true
  command: '--replSet "rs0"'
  image: 'mongo:3'
  restart: always
  tags:
    - staging

mongo-02:
  autoredeploy: true
  command: '--replSet "rs0"'
  image: 'mongo:3'
  restart: always
  tags:
    - staging

mongo-03:
  autoredeploy: true
  command: '--replSet "rs0"'
  image: 'mongo:3'
  restart: always
  tags:
    - staging

mongo-test:
  autoredeploy: true
  image: 'mongo:3'
  ports:
    - '27017'
  restart: always
  tags:
    - staging
